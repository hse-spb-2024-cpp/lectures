# Windows
Подойдёт как Windows 10, так и Windows 11.

Вам в любом случае потребуется поставить и настроить себе Ubuntu в виртуальной машине или WSL (по умолчанию используется версия 2, это ок).
В случае WSL вы можете либо работать целиком в консоли, либо настроить среду разработки, чтобы она запускала всё в WSL.

Но вы также можете установить себе компиляторы, работающие целиком под Windows.
Принципиально вы можете себе поставить либо экосистему Microsoft Visual Studio (компиляторы Visual C++ и Clang), либо экосистему msys2 (компиляторы GCC и Clang, плюс куча инструментов как под Linux).
Будьте осторожны: есть много других версий GCC и Clang (в том числе в комплекте с Code::Blocks, Qt Creator, CLion), их может быть сложно поставить, настроить или запустить.

## Компиляторы, среда разработки инструменты LLVM
### Вариант 1: Установка Visual Studio
Занимает уйму места, долго ставится и требует подключение к интернету при установке, зато сразу идёт со средой разработки и отладчиком.

Используется компилятор Visual C++ и стандартная библиотека Microsoft STL.

1. Скачайте и запустите установщик [с официального сайта](https://visualstudio.microsoft.com/ru/thank-you-downloading-visual-studio/?sku=Community&channel=Release&version=VS2022&source=VSLandingPage&cid=2030&passive=false).
2. При установке выберите:
    * Workload ("Рабочая нагрузка") "Desktop development with C++" ("Разработка классических приложений на C++").
    * Внутри этой Workload оставьте только "Отдельные компоненты":
        * "MSVC v143 ... x64/x86 build tools" ("MSVC версии 143 ... x64/x86 Build Tools (последняя версия)")
        * "Windows 10 SDK" ("Пакет SDK для Windows 10") или "Windows 11 SDK" ("Пакет SDK для Windows 11") в зависимости от вашей версии Windows
        * "C++ AddressSanitizer" (не переводится)
        * При желании добавьте "C++ profiling tools" ("Средства профилирования C++"), может помочь при поиске тормозов в программе
        * При желании добавьте "IntelliCode" (не переводится), это какие-то экспериментальные подсказки при наборе кода
    * На вкладке "Language packs" ("Языковые пакеты") добавьте английский язык, а вот русский лучше удалить.
3. Поставьте компилятор Clang и инструменты из проекта LLVM (вроде `clang-format`) [отсюда](https://github.com/llvm/llvm-project/releases/download/llvmorg-15.0.7/LLVM-15.0.7-win64.exe).
   Обратите внимание, что эта сборка использует стандартную библиотеку Visual C++ и не будет работать без установленной Visual Studio.
   Но запускать этот Clang умеют и Visual Studio, и в CLion.
   При установке выберите `Add LLVM to the system PATH for all users`.

С компилятором Visual Studio проще работать из Visual Studio, но можно и настроить для этого CLion.
При большом желании можно запускать компилятор руками из командной строки: откройте `x64 Native Tools Command Prompt for VS 2022` из меню "Пуск", компилятор станет называться `cl`.
32-битная версия запускается из `x86 Native Tools Command Prompt for VS 2022`.

### Вариант 2: установка экосистемы msys2
Есть много разных сборок GCC, я рекомендую ставить из проекта msys2. Так вы бесплатно получите кучу библиотек для C++ и полезных инструментов из Linux.

По умолчанию будет использоваться компилятор GCC и стандартная библиотека GNU libstdc++.

1. Установите msys2 [по инструкции](https://www.msys2.org/).
   Если Microsoft Defender будет ругаться, ничего страшного.
2. Из консоли msys2 запустите команду для установки компилятора, системы Make и инструментов LLVM:
   ```bash
   pacman -S mingw-w64-x86_64-gcc mingw-w64-x86_64-make mingw-w64-x86_64-clang mingw-w64-x86_64-clang-tools-extra
   ```
3. При желании установите больше компиляторов и стандартных библиотек (Visual Studio не требуется):
   ```bash
   pacman -S mingw-w64-x86_64-clang
   pacman -S mingw-w64-x86_64-libc++
   ```

Проще всего использовать либо редактор кода, либо установить CLion.
Осторожно: CLion идёт в комплекте со своей версией gcc, надо использовать не её.

## Установка Ubuntu
Требуется Windows 10 или Windows 11.

Дальше идёт пересказ [инструкции по автоматической установке WSL](https://learn.microsoft.com/ru-ru/windows/wsl/install).
Экспериментальная альтернатива — установка всего через Docker — тоже может потребовать включённый WSL.

### Включение WSL
Установите последние обновления Windows (версию Windows обновлять не надо).
Иногда работает и без этого, но если уже есть проблемы с обновлениями — могут быть проблемы и с WSL.
Перезагрузите компьютер, если были обновления.

Выполните следующую команду в консоли от имени администратора:
```
wsl --install
```

Если она мгновенно вывела кучу строк с описанием флагов вроде `Usage: wsl.exe [Argument] [Options...] [CommandLine]` — WSL уже был установлен, переходите к следующему разделу.

Если она подумала и вывела несколько строк вроде `Installing: Windows Subsystem for Linux` — WSL устанавливается, подождите завершения команды и перезагрузите компьютер.

### Установка Ubuntu 22.04
Выполните следующую команду в консоли от имени администратора:
```bash
wsl --install -d Ubuntu-22.04
```
Если возникла ошибка `0x80370114` — у вас не до конца установлен WSL, попробуйте перезагрузиться и повторить раздел выше.

Убедитесь, что у вас спросили имя пользователя и пароль при настройке Ubuntu.
Не используйте кириллицу (да и вообще не-латинские символы) и пробелы в именах или описаниях пользователей.
Не работаете под пользователем `root`, так можно случайно покорёжить себе систему неаккуратной командой.

### Настройка Ubuntu 22.04
У вас может случайно оказаться несколько установленных версий Linux, проверьте командой `wsl --list`

После установки запустите WSL и настройте как будто это обычная Ubuntu, разве что без виртуальной машины с Windows (у вас уже есть обычная).
Обязательно проверьте версию.

Также будет полезно поставить команды `dos2unix`/`unix2dos` (идут вместе), выполнив:

```bash
sudo apt install dos2unix
```

## Прочие инструменты
1. Cppcheck 2.7 ставится [по ссылкам с официального сайта](https://github.com/danmar/cppcheck/releases/download/2.7/cppcheck-2.7-x64-Setup.msi).
2. Консольный клиент git ставится [с официального сайта](https://git-scm.com/download/win), в комплекте также включён git bash (он подойдёт) и timeout.
   В качестве редактора рекомендуется оставить блокнот или Nano. Не выбирайте Vim, если не знаете, что это.
3. Интерпретатор языка Python (для запуска некоторых автоматических тестов) ставится [с официального сайта](https://www.python.org/downloads/).
4. Система сборки CMake ставится [с официального сайта](https://cmake.org/download).
   Для Visual Studio система make не нужна, а для msys2 она уже была поставлена по инструкции выше (надо выбирать правильный генератор ключом `-G "MSYS Makefiles"`).

### Дополнительно: установка Intel C++ Compiler Classic
Ставится как часть [Intel openAPI Base Toolkit](https://www.intel.com/content/www/us/en/developer/tools/oneapi/base-toolkit-download.html?operatingsystem=window&distributions=offline&version=2023.2.0).
Email не нужен, там есть ссылка "Continue without signing up (download starts immediately)" прямо под кнопкой.
Если не грузится - это санкции, попробуйте через VPN.

### Дополнительно: установка Boost
Если вы установили Visual Studio, проще всего установить предкомпилированный Boost: [64-битная версия](https://sourceforge.net/projects/boost/files/boost-binaries/1.74.0/boost_1_74_0-msvc-14.2-64.exe/download),
[32-битная версия](https://sourceforge.net/projects/boost/files/boost-binaries/1.74.0/boost_1_74_0-msvc-14.2-32.exe/download).

Если у вас стоит msys2, то запустите `pacman -S mingw-w64-x86_64-boost`.

### Дополнительно: установка Netcat
Если у вас стоит msys2, то запустите `pacman -S openbsd-netcat` (есть ещё версия gnu, она не такая модная).

Вы можете скачать архив https://nmap.org/dist/nmap-7.92-win32.zip и запускать оттуда файл `ncat.exe` (остальные приложения и драйвера не нужны).

Вы также можете запускать всё из WSL, но WSL2 считается отдельной машиной (в отличие от WSL1) со своими IP-адресами.
Не рекомендуется.

### После установки
Если какой-то инструмент не запускается из консоли, добавьте его [в переменную среды `PATH`](https://nicothin.pro/page/windows-path).
Например, для msys2 наверняка будет нужна папка вроде `C:\msys239\mingw64\bin\` — именно в ней лежит `g++.exe` (проверьте!).
Также может потребоваться `C:\msys239\usr\bin`, в ней может лежать `nc.exe`.
После этого перезапустите консоль/CLion, чтобы они прочитали новую версию `PATH`.

Осторожно: [не пишите `main` в PowerShell](https://stackoverflow.com/questions/46460771/why-does-running-main-in-powershell-open-my-mouse-properties).
